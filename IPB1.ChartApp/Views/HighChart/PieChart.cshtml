@using IPB1.ChartApp.Controllers
@using Newtonsoft.Json
@model List<PieChartDto>

<figure class="highcharts-figure">
	<div id="container"></div>
	<p class="highcharts-description">
		Pie charts are very popular for showing a compact overview of a
		composition or comparison. While they can be harder to read than
		column charts, they remain a popular choice for small datasets.
	</p>
</figure>

@section scripts {
	<script>

		const _data =  @Html.Raw(JsonConvert.SerializeObject(Model))
		Highcharts.chart('container', {
			chart: {
				type: 'pie',
				zooming: {
					type: 'xy'
				},
				panning: {
					enabled: true,
					type: 'xy'
				},
				panKey: 'shift'
			},
			title: {
				text: 'Egg Yolk Composition'
			},
			tooltip: {
				valueSuffix: '%'
			},
			subtitle: {
				text:
				'Source:<a href="https://www.mdpi.com/2072-6643/11/3/684/htm" target="_default">MDPI</a>'
			},
			plotOptions: {
				pie: {
					allowPointSelect: true,
					cursor: 'pointer',
					dataLabels: [{
						enabled: true,
						distance: 20
					}, {
						enabled: true,
						distance: -40,
						format: '{point.percentage:.1f}%',
						style: {
							fontSize: '1.2em',
							textOutline: 'none',
							opacity: 0.7
						},
						filter: {
							operator: '>',
							property: 'percentage',
							value: 10
						}
					}]
				}
			},
			series: [
				{
					name: 'Percentage',
					colorByPoint: true,
					data:_data
				}
			]
		});

	</script>
}